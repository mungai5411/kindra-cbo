{% extends "reporting/base_report.html" %}

{% block title %}Volunteer Hours Report - {{ report.title }}{% endblock %}

{% block content %}
<!-- Header -->
<div class="report-header">
    <div class="logo-section">
        {% if logo_path %}
        <img src="file://{{ logo_path }}" class="logo-img">
        {% else %}
        <div
            style="border:1px solid #ccc; width:60px; height:60px; line-height:60px; text-align:center; font-size:10px;">
            LOGO</div>
        {% endif %}
    </div>
    <div class="org-info">
        <h1 class="org-name">Kindra CBO</h1>
        <p class="org-details">Community-Based Organization | Nairobi, Kenya</p>
        <p class="org-details">info@kindra.org | +254 XXX XXX XXX</p>
    </div>
    <div class="report-badge">Volunteer Report</div>
</div>

<!-- Report Metadata -->
<div class="report-meta">
    <h2 class="report-title">{{ report.title }}</h2>
    <div class="meta-row">
        <span class="meta-label">Report Period:</span>
        <span class="meta-value">{{ report.start_date|date:"d M Y" }} - {{ report.end_date|date:"d M Y" }}</span>
    </div>
    <div class="meta-row">
        <span class="meta-label">Generated On:</span>
        <span class="meta-value">{{ report.generated_at|date:"d M Y H:i" }}</span>
    </div>
    <div class="meta-row">
        <span class="meta-label">Generated By:</span>
        <span class="meta-value">{{ report.generated_by.get_full_name|default:"System Admin" }}</span>
    </div>
    {% if report.description %}
    <div class="meta-row">
        <span class="meta-label">Description:</span>
        <span class="meta-value">{{ report.description }}</span>
    </div>
    {% endif %}
</div>

<!-- Summary Statistics -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ summary.total_volunteers }}</div>
        <div class="stat-label">Total Volunteers</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ summary.total_hours|floatformat:1 }}</div>
        <div class="stat-label">Total Hours</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ summary.active_count }}</div>
        <div class="stat-label">Active Volunteers</div>
    </div>
</div>

<!-- Data Table -->
<table class="data-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Status</th>
            <th>Total Hours</th>
            <th>Join Date</th>
        </tr>
    </thead>
    <tbody>
        {% for volunteer in volunteers %}
        <tr>
            <td>{{ volunteer.full_name|default:"-" }}</td>
            <td>{{ volunteer.email|default:"-" }}</td>
            <td>{{ volunteer.phone_number|default:"-" }}</td>
            <td>
                <span
                    style="{% if volunteer.status == 'ACTIVE' %}color: #519755; font-weight: bold;{% else %}color: #999;{% endif %}">
                    {{ volunteer.status|default:"UNKNOWN" }}
                </span>
            </td>
            <td style="font-weight: bold;">{{ volunteer.total_hours|default:0|floatformat:1 }}</td>
            <td>{{ volunteer.created_at|date:"d M Y"|default:"-" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" style="text-align: center; color: #999; padding: 20px;">
                No volunteer records found for this period.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Signature Section -->
<div class="signature-section">
    <div class="signature-line"></div>
    <div class="signature-text">Authorized Signature</div>
</div>

<!-- Footer -->
<div class="report-footer">
    <p>Kindra Community-Based Organization | {{ report.generated_at|date:"Y" }}</p>
    <p>This is a computer-generated report and requires no signature</p>
</div>
{% endblock %}